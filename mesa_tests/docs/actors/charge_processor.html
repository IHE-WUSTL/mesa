<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title></head>

<body>
<p align="center"><strong>HIMSS and RSNA</strong></p>
<p align="center"><strong>Integrating the Healthcare Enterprise</strong></p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center"><strong>IHE Charge Processor Tests</strong></p>
<p align="center"><strong>&nbsp;</strong></p>
<p align="center"><strong>&nbsp;</strong>Electronic Radiology Laboratory<br />
  Mallinckrodt Institute of  Radiology<br />
  510 South    Kingshighway Blvd. <br />
  St. Louis, MO&nbsp; 63110 <br />
  314.362.6965 (Voice)<br />
  314.362.6971 (Fax)</p>
<p align="center">&nbsp;</p>
<p align="center">Revision 9.0.0<br />
  20-September-2005</p>
<p align="center">Copyright &copy; 2005:  HIMSS/RSNA</p>
<strong><br clear="all" />
</strong>
<p><strong>&nbsp;</strong><strong>Contents:</strong></p>
<p><a href="#charge_proc_tests">Charge Processor Tests</a> <br />
    <a href="#intro"> Introduction</a> <br />
    <a href="#msg_att">Message Attributes</a> <br />
    <a href="#msg_values">Message Values</a> <br />
    <a href="#config"> Configuration</a> <br />
    <a href="#start_servers">Starting the MESA Servers</a> <br />
    <a href="#unique_id">Unique Identifiers</a> <br />
    <a href="#test_instrt">Test Instructions</a> <br />
    <a href="#charge_proc_tests2">Charge  Processor Tests</a> </p>
<ol>
  <li><a href="#test_1301">Charge Processor Test 1301: Account  Management: New Account</a> <br />
  </li>
  <li><a href="#test_1302"> Charge Processor Test 1302: Account  Management: Update Account</a> <br />
  </li>
  <li><a href="#test_1303">Charge Processor Test 1303: Account  Management: End Account</a> <br />
  </li>
  <li><a href="#test_1305">Charge Processor Test 1305: Charge  Posting Process Flow #1</a> </li>
</ol>
<h1><a name="#charge_proc_tests" id="#charge_proc_tests">Charge Processor  Tests</a> </h1>
<p>This  document describes tests for a Charge Processing actor. This actor will receive  HL7 messages (ADT, DFT) from MESA  software and process those messages.</p>
<h2><a name="#intro" id="#intro">Introduction</a></h2>
<p>Each test is run using the  same procedure.&nbsp; We assume you are using  an interactive terminal or terminal emulator and are logged on to the MESA test system.&nbsp; Change directory to <em>$MESA_TARGET/mesa_tests/rad/actors/chg_proc</em>.&nbsp; Make sure the $MESA_TARGET and $MESA_STORAGE  environment variables are set properly.</p>
<h3>Integration Profiles and Test Procedures</h3>
<p>This document lists a number  of tests for Charge Processors. Connectathon Management web tool to determine  what tests are required for your system/actor/profile combination.</p>
<h2><a name="#msg_att" id="#msg_att">Message  Attributes</a> </h2>
<h2><a name="#msg_values" id="#msg_values">Message  Values</a> </h2>
<h2><a name="#config" id="#config">Configuration</a></h2>
<p>The Charge Processor scripts  described below use an ASCII configuration file to identify parameters such as  host names and port numbers.&nbsp; The  configuration file is named <em>chgp</em><em>_test.cfg</em> and is included in the directory <em>$MESA_TARGET/mesa_tests/rad/actors/chg_proc</em>.&nbsp; Edit the file and change entries (host name,  port number) that pertain to your system.&nbsp;  Your system is identified by entries that begin with TEST.<br />
  Read the Runtime Notes  section of the <em>Installation Guide</em> to  determine the proper settings for the MESA  runtime environment.</p>
<h2><a name="#start_servers" id="#start_servers">Starting the </a>MESA Servers</h2>
<p>These instructions assume  you are using a terminal emulator on Unix systems or an MS DOS command window  under Windows NT.&nbsp; Each test uses a  command line interface; there is no graphical user interface. Before you start  the test procedure, you need to start several MESA servers.&nbsp;  Make sure the appropriate database is running (PostgreSQL, SQL  Server).&nbsp; To start the MESA servers:</p>
<ol>
  <li>Enter the Secure  Node exam directory: <em>mesa_tests/rad/actors/chg_proc</em></li>
  <li>Execute the  appropriate script to start the servers:</li>
</ol>
<pre>     scripts/start_mesa_servers.csh  [loglevel]&nbsp;  (Unix)</pre>
  <pre>     scripts\start_mesa_servers.bat (Windows)</pre>
  <p>In the unix environment,  loglevel is an optional argument (0 is default).&nbsp; Log levels are:</p>
    <blockquote>
      <p>0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; no logging<br />
        1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; errors<br />
        2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; warnings<br />
        3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; verbose<br />
        4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; conversational (really verbose)</p>
    </blockquote>
    <p>To set the log level for  Windows NT, set the environment variable LOGLEVEL to the desired value before  invoking the batch file.<br />
    When you are finished  running one or more tests, you can stop the servers:
<pre>     scripts/stop_mesa_servers.csh (Unix)</pre>
<pre>     scripts\stop_mesa_servers.bat (Windows)</pre>
    Log files are stored in  $MESA_TARGET/logs.</pre>
<h2>&nbsp;<a name="#unique_id" id="#unique_id">Unique Identifiers</a></h2>
<h2><a name="#test_instrt" id="#test_instrt">Test Instructions</a></h2>
<p><strong><em>Please note the test instructions change starting  with the 6.8.0 release</em></strong>.<br />
  Each test is independent of the others.&nbsp; You must collect the results of one test  before starting a new test.</p>
<ol>
  <li>Enter  the Charge Processor exam directory: <em>mesa_tests/rad/actors/chg_proc</em></li>
  <li>Remember  the MESA  servers were started according to the directions in <a href="#start_servers">Starting the MESA Servers</a>.</li>
</ol>
<p>Workflow tests use a test engine that manages the test  process. This test engine is used for all workflow tests and is driven by a  text file that describes the events for a specific test. Each test below will  indicate which script is appropriate (usually the chg script for Charge  Processing). The arguments to the script are the test number and the log level  for output:</p>
<ol>
  <li>errors only</li>
  <li>warnings</li>
  <li>verbose</li>
  <li>reference  information (pointers into IHE Technical Framework)</li>
</ol>
<p>An example of the syntax used to invoke the script for the  1301 test is:
<pre>     perl scripts/chgp_chg.pl 1301 1</pre>
  The test script will announce what events are about to  happen and will request that you send specific events according to the sequence  defined in <em>IHE Tests: Transaction  Sequences</em>.&nbsp; When you have completed  the sequence of events, results can be evaluated by running the evaluation  script:
 <pre>     perl  &lt;test&gt;/eval_&lt;test&gt;.pl &lt;log level&gt;</pre>
  For example: <pre>     perl 1301/eval_1301.pl 3</pre>
  The log level for evaluation is defined as:</p>
<ol>
  <li>errors only</li>
  <li>warnings</li>
  <li>context information (verbose)</li>
  <li>reference information (pointer into IHE Technical  Framework)</li>
</ol>
<p>Starting with version 6.7.0 of the MESA software, the user can change the  patient name and patient ID of the test subject prior to running the test. This  allows one to rerun a test without clearning the database of the prior subject.  This is done from the directory <em>$MESA_TARGET/mesa_tests/rads/msgs</em>.<br />
  A perl script is used to query the user for a new patient  name and other demographics; the script automatically generates the new patient  identifier. The perl script can also use an existing text file to specify the  new demographics. The software is shipped with text files that are designed for  IHE United States. It would be a simple task to make different text files for  other countries. As listed in each sectio below, invoke the perl script with no  arguments for interactive questions. If you specify an argument, it is the name  of a text file with the demographic values.<br />
  Users should reset the MESA HL7 files as described above  if the user tests different actors using the same MESA test configuration. An example is a  system that tests as both an Order Placer and an Order Filler. The MESA tests for one actor  may leave the HL7 messages in the wrong state for those same tests by the other  actor. By regenerating the HL7 messages before you run the test script, you  will avoid those problems.</p>
<h1><a name="#charge_proc_tests2" id="#charge_proc_tests2">Charge Processor Tests</a></h1>
<p>Each section below lists one  test for a Charge Processor.</p>
<table><tr><td bgcolor="#33FFFF">
<h2><a name="#test_1301" id="#test_1301">Charge Processor Test 1301: Account Management:  New Account</a></h2>
<p>This test sends one BAR message to your Charge Processor  to create a new account. It does not follow up with an ADT message for admission  or patient registration.</p>
<h3>References</h3>
<h3>Instructions</h3>
<p>The nominal patient name is ALABAMA^MONTGOMERY <br />
  To run this test, follow these steps using a DOS window or  terminal emulator:</p>
<ol>
  <li>Set  the current directory to $MESA_TARGET/mesa_tests/rad/actors/<em>chg_proc</em>.</li>
  <li>Make  sure the MESA  servers have been started as described in <a href="#start_servers">Starting the MESA Servers</a> above.</li>
  <li>Run  the test script as follows:</li>
</ol>
<pre>     perl  scripts/ chgp_chg.pl 1301 &lt;log&gt;</pre>
<ol start="4">
  <li>Run  the evaluation script below.</li>
</ol>
<h3>Evaluation</h3>
<p>Answer the questions for test 1301 in the file  charge_questions.txt. Use that file as the template, rename that file to  CHGP_1301.txt and submit your responses as the evaluation.</p>
<h3>Supplemental Information </h3>
<p>To change patient name, patient ID prior to the test:
<pre>     cd $MESA_TARGET/mesa_tests/rad/msgs</pre>
  <pre>     perl mesa_reset/1301.pl ihe-us/1301.var (or) </pre>
  <pre>     perl mesa_reset/1301.pl</pre></p></td></tr></table>
<h2><a name="#test_1302" id="#test_1302">Charge Processor Test 1302: Account Management:  Update Account</a></h2>
<p>Test Case 1302 covers account management and the P05 message  used to update a patient account. See IHE TF Vol 3, section 4.36.4.2.</p>
<h3>References</h3>
<h3>Instructions</h3>
<p>The nominal patient name is ALASKA^JUNEAU.<br />
  To run this test, follow these steps using a DOS window or  terminal emulator:</p>
<ol>
  <li>Set  the current directory to $MESA_TARGET/mesa_tests/rad/actors/<em>chg_proc</em>.</li>
  <li>Make  sure the MESA  servers have been started as described in <a href="#start_servers">Starting the MESA Servers</a> above.</li>
  <li>Run  the test script as follows:</li>
</ol>
<pre>     perl  scripts/ chgp_chg.pl 1302 &lt;log&gt;</pre>
<ol start="4">
  <li>Run  the evaluation script below.</li>
</ol>
<h3>Evaluation</h3>
<p>Answer the questions for test 1302 in the file  charge_questions.txt. Use that file as the template, rename that file to  CHGP_1302.txt and submit your responses as the evaluation.</p>
<h3>Supplemental Information </h3>
<p>To change patient name, patient ID prior to the test:
<pre>     cd $MESA_TARGET/mesa_tests/rad/msgs</pre>
  <pre>     perl mesa_reset/1302.pl ihe-us/1302.var (or) </pre>
  <pre>     perl mesa_reset/1302.pl</pre>
  <table><tr><td bgcolor="#33FFFF">
<h2><a name="#test_1303" id="#test_1303">Charge Processor Test 1303: Account Management:  End Account</a></h2>
<p>Test Case 1303 covers account management and the P06 message  used to update a patient account. See IHE TF Vol 3, section 4.36.4.3.</p>
<h3>References</h3>
<h3>Instructions</h3>
<p>The nominal patient name is ARIZONA^PHOENIX.<br />
  To run this test, follow these steps using a DOS window or  terminal emulator:</p>
<ol>
  <li>Set  the current directory to $MESA_TARGET/mesa_tests/rad/actors/<em>chg_proc</em>.</li>
  <li>Make  sure the MESA  servers have been started as described in <a href="#start_servers">Starting the MESA Servers</a> above.</li>
  <li>Run  the test script as follows:</li>
</ol>
<pre>     perl  scripts/ chgp_chg.pl 1303 &lt;log&gt;</pre>
<ol start="4">
  <li>Run  the evaluation script below.</li>
</ol>
<h3>Evaluation</h3>
<p>There is no formal evaluation for this test. This test  gives you the opportunity to test receiving P06 messages. Create a file challed  CHGP_1303.txt; indicate in the file you have received the P06 messages and  submit the file to the Project Manager.</p>
<h3>Supplemental Information </h3>
<p>To change patient name, patient ID prior to the test:
<pre>     cd $MESA_TARGET/mesa_tests/rad/msgs</pre>
  <pre>     perl mesa_reset/1303.pl ihe-us/1303.var (or) </pre>
  <pre>     perl mesa_reset/1303.pl</pre></p></td></tr></table>
<h2><a name="#test_1305" id="#test_1305">Charge Processor Test 1305: Charge Posting  Process Flow #1</a></h2>
<p>Test Case 1305 involves all of the actors and transactions  for a fully integrated Charge Processing Process Flow. See IHE TF Vol I,  section 11.3.</p>
<h3>References</h3>
<h3>Instructions</h3>
<p>The nominal patient name is CALIFORNIA^SACRAMENTO.<br />
  To run this test, follow these steps using a DOS window or  terminal emulator:</p>
<ol>
  <li>Set  the current directory to $MESA_TARGET/mesa_tests/rad/actors/<em>chg_proc</em>.</li>
  <li>Make  sure the MESA  servers have been started as described in <a href="#start_servers">Starting the MESA Servers</a> above.</li>
  <li>Run  the test script as follows:</li>
</ol>
<pre>     perl  scripts/ chgp_chg.pl 1305 &lt;log&gt;</pre>
<ol start="4">
  <li>Run  the evaluation script below.</li>
</ol>
<h3>Evaluation</h3>
<p>Answer the questions for test 1305 in the file  charge_questions.txt. Use that file as the template, rename that file to  CHGP_1305.txt and submit your responses as the evaluation.</p>
<h3>Supplemental Information </h3>
<p>To change patient name, patient ID prior to the test:
<pre>     cd $MESA_TARGET/mesa_tests/rad/msgs</pre>
  <pre>     perl mesa_reset/1305.pl ihe-us/1305.var (or) </pre>
  <pre>     perl mesa_reset/1305.pl</pre>
</body>
</html>
