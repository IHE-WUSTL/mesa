<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title></head>

<body>
<p align="center"><strong>HIMSS and RSNA</strong><br />
    <strong>Integrating the Healthcare Enterprise</strong></p>
<p align="center"><strong>&nbsp;</strong></p>
<p align="center"><strong>&nbsp;</strong><strong>IHE/MESA Image Creator Tests</strong></p>
<p>&nbsp;</p>
<p align="center">Electronic Radiology  Laboratory<br />
  Mallinckrodt Institute of  Radiology<br />
  510 South    Kingshighway Blvd. <br />
  St. Louis, MO&nbsp; 63110 <br />
  314.362.6965 (Voice)<br />
  314.362.6971 (Fax)</p>
<p align="center">&nbsp;</p>
<p align="center">Revision 6.3.0<br />
  August 16, 2002</p>
<strong>Contents:</strong><br clear="all" />
<p><a href="#img_disp_tests">Image Display Tests</a><br />
  <a href="#intro">Introduction</a><br />
  <a href="#msg_att">Message Attributes</a><br />
  <a href="#msg_values">Message Values</a><br />
  <a href="#config">Configuration</a><br />
  <a href="#start_servers">Starting the MESA Servers</a><br />
  <a href="#indiv_tests">Individual Tests</a></p>
<ol>
  <li><a href="#test_500">Image Creator Test 500: Display Calibration</a><br />
  </li>
  <li><a href="#test_511">Image Creator Test 511: Key Image Note 511</a><br />
  </li>
  <li><a href="#test_512">Image Creator Test 512: Key Image Note 512</a><br />
  </li>
  <li><a href="#test_513">Image Creator Test 513: Key Image Note 513</a><br />
  </li>
  <li><a href="#test_521">Image Creator Test 521: Consistent Presentation  of Images</a><br />
  </li>
  <li><a href="#test_551">Image Creator Test 551: Example Image/GSPS  Objects</a><br />
  </li>
  <li><a href="#test_552">Image Creator Test 552: Example Key Image  Note</a><br />
  </li>
  <li><a href="#test_1412">Image Creator Test 1412: PWF CT</a></li>
  <li><a href="#test_1701">Image Creator Test 1701: Evidence Document  Management in Scheduled Workflow</a><br />
    <br clear="all" />
  &nbsp;</li>
</ol>
<h1><a name="#img_disp_tests" id="#img_disp_tests">Image Display Tests</a> </h1>
<h2><a name="#intro" id="#intro">Introduction</a></h2>
<p>This document describes several tests for  Image Creator systems.&nbsp; The Display  Consistency tests are defined in a separate document: <em>Display Consistency Test Plan for Image Creator</em>.</p>
<h3>Integration Profiles  and Test Procedures</h3>
<p>This document lists a number of tests for Image Creators.  Please refer to the <em>IHE_YR4_Test_Requirements.xls</em> spreadsheet to determine the required and optional tests.</p>
<h2><a name="#msg_att" id="#msg_att">Message  Attributes</a> </h2>
<h2><a name="#msg_values" id="#msg_values">Message  Values</a> </h2>
<h2><a name="#config" id="#config">Configuration</a> </h2>
<p>The MESA Image Manager maintains a database of DICOM  applications used for C-Move operations.&nbsp;  Add an entry for the storage SCP(s) associated with your  workstation.&nbsp; Edit the text file <em>$MESA_TARGET/db/loaddicomapp.pgsql</em> (Unix) or <em>$MESA_TARGET/db/loaddicomapp.sql</em> (Windows NT)&nbsp; Use the existing entries as  a template and add entries for your workstations as appropriate.&nbsp; The column names found in the SQL insert  statements are described in the following table.</p>
<table border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td width="247" valign="top"><p align="center"><strong>Column Name</strong></p></td>
    <td width="391" valign="top"><p align="center"><strong>Description</strong></p></td>
  </tr>
  <tr>
    <td width="247" valign="top"><p>aet</p></td>
    <td width="391" valign="top"><p>DICOM Application Entity Title.&nbsp; Must be unique.</p></td>
  </tr>
  <tr>
    <td width="247" valign="top"><p>host</p></td>
    <td width="391" valign="top"><p>Host name (or IP address) of the application.</p></td>
  </tr>
  <tr>
    <td width="247" valign="top"><p>port</p></td>
    <td width="391" valign="top"><p>TCP/IP port number for receiving associations.</p></td>
  </tr>
  <tr>
    <td width="247" valign="top"><p>org</p></td>
    <td width="391" valign="top"><p>The organization that operates the device.&nbsp; Useful if multiple organizations use the    Image Manager.</p></td>
  </tr>
  <tr>
    <td width="247" valign="top"><p>com</p></td>
    <td width="391" valign="top"><p>A comment field.</p></td>
  </tr>
</table>
<p>You can test your work as follows:
<pre>     perl  load_apps.pl imgmgr</pre>
  The file <em>$MESA_TARGET/runtime/imgmgr/ds_dcm.cfg</em> is used to configure the MESA Image Manager.&nbsp;  The only parameter users should change is the LOG_LEVEL value.&nbsp; Log levels are defined in section 1.5.&nbsp; DICOM configuration parameters are listed in  the table below.</p>
<table border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td width="192" valign="top"><p align="center">Application</p></td>
    <td width="190" valign="top"><p align="center">AE Title</p></td>
    <td width="122" valign="top"><p align="center">Port</p></td>
  </tr>
  <tr>
    <td width="192" valign="top"><p>MESA Image Manager</p></td>
    <td width="190" valign="top"><p align="center">MESA_IMG_MGR</p></td>
    <td width="122" valign="top"><p align="center">2350</p></td>
  </tr>
</table>
<p>Read the <em>Runtime  Notes</em> section of the<em> Installation  Guide</em> to determine the proper settings for the MESA runtime environment.</p>
<h2><a name="#start_servers" id="#start_servers">Starting the </a>MESA Servers </h2>
<p>These instructions assume you are using a terminal  emulator on Unix systems or an MS DOS command window under Windows NT.&nbsp; Each test uses a command line interface;  there is no graphical user interface. Before you start the test procedure, you  need to start the MESA Image Manager servers.&nbsp;  Make sure the appropriate database is running (PostgreSQL, SQL  Server).&nbsp; To start the MESA servers:</p>
<ol start="1" type="1">
  <li>Enter       the Image Display exam folder:<em> $MESA_TARGET/testsuite/y3_actor/actors/imgcrt</em></li>
  <li>Execute       the appropriate script to start the servers:</li>
</ol>
<pre>     scripts/start_mesa_servers.csh &nbsp;(Unix)</pre>
  <pre>     scripts\start_mesa_servers.bat  (Windows)</pre>
  Log levels are set for the MESA Image Manager in the file: <em>$MESA_TARGET/runtime/imgmgr/ds_dcm.cfg</em>.&nbsp; Log levels are:</p>
<ol start="0">
  <li>no logging</li>
  <li>errors</li>
  <li>warnings</li>
  <li>verbose</li>
  <li>conversational  (really verbose)</li>
</ol>
<p>When you are finished running one or more tests, you can  stop the servers:
<pre>     scripts/stop_mesa_servers.csh  (Unix)</pre>
  <pre>     scripts\stop_mesa_servers.bat  (Windows)</pre>
  Log files are stored in <em>$MESA_TARGET/logs</em>. </p>
<h3>Starting  Servers for Test 1701</h3>
<p>The Test 1701 scripts are found in a different directory  from the other Image Creator scripts.&nbsp;  The Test 1701 scripts are in the evdcrt (evidence creator) directory,  and use a slightly different server control procedures.&nbsp; <br />
  Before you start the test procedure, you need to start the  MESA Image Manager servers.&nbsp; Make sure  the appropriate database is running (PostgreSQL, SQL Server).&nbsp; To start the MESA servers:</p>
<ol start="3" type="1">
  <li>Enter       the Image Display exam folder:<em> $MESA_TARGET/testsuite/y3_actor/actors/evdcrt</em></li>
  <li>Execute       the appropriate script to start the servers:</li>
</ol>
<pre>     perl scripts/mesa_servers.pl start </pre>
  Log levels are as described in the section above.<br />
  When you are finished running one or more tests, you can  stop the servers:
<pre>     perl  scripts/mesa_servers.pl stop</pre>
  Log files are stored in <em>$MESA_TARGET/logs</em>. </p>

<h1><a name="#indiv_tests" id="#indiv_tests">Individual Tests</a></h1>
<table><tr><td bgcolor="#33FFFF">
<h2><a name="#test_500" id="#test_500">Image Creator Test 500: Display Calibration</a></h2>
<p>Image Creators supporting the Consistent Presentation of  Images Integration Profile must calibrate their displays in accordance with  DICOM PS 3.14.&nbsp; Instructions for this  test are included in the document: <em>Display  Consistency Test Plan for Image Creator</em>.</p></td></tr></table>
<h2><a name="#test_511" id="#test_511">Image Creator Test 511: Key Image Note 511</a></h2>
<p>In this test, the Image Creator will create a Key Image  Note that refers to a single image from a series.</p>
<h3>References</h3>
<h3>Instructions</h3>
<ol>
  <li>Create/modify  the SQL script to identify the Image Creator under test.</li>
  <li>Start  the MESA  servers as described in <a href="#start_servers">Starting the MESA Servers</a> above.</li>
  <li>The  steps below are run from the directory <em>$MESA_TARGET/testsuite/y3_actor/actors/imgcrt</em>.</li>
  <li>Load  the data sets into the MESA Image Manager.</li>
</ol>
<pre>     perl 5xx/load_img_mgr.pl</pre>
<ol start="5">
  <li>Retrieve  the study for the patient CRTHREE^PAUL.</li>
  <li>Create  a Key Image Note with the parameters described below.&nbsp; Send the DICOM composite object to the MESA  Image Manager.</li>
</ol>
<h3>Evaluation</h3>
<ol start="1">
  <li>Evaluate  the contents of your Key Image Note as follows:</li>
</ol>
<pre>     perl 511/eval_511.pl [-v]</pre>
  <h3>Supplemental Information </h3>
  <p>If you need to send the note a second time, you should  clear the MESA Image Manager first.&nbsp; This  will allow the evaluation software to examine your latest object.<br />
</p>
  <pre>     perl  scripts/reset_servers.pl</pre>
 <table border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td width="139" valign="top"><p>Template Identifier</p></td>
    <td width="384" valign="top"><p>2010:DCMR</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>Document Title</p></td>
    <td width="384" valign="top"><p>113000:DCM:Of Interest</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>HAS CONC MOD</p></td>
    <td width="384" valign="top"><p>CODE 121049:DCM:Language of Content Item and Descendants    = <br />
      ISO369_2:eng:English</p></td>
    <td width="115" valign="top"><p>Optional</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>HAS OBS CONTEXT</p></td>
    <td width="384" valign="top"><p>CODE 121005:DCM:Observer Type = 121006:DCM:Person</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>HAS OBS CONTEXT</p></td>
    <td width="384" valign="top"><p>PNAME 121008:DCM:Person Observer Name = MOORE^STEVE</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>CONTAINS TEXT</p></td>
    <td width="384" valign="top"><p>113012:DCM:Key Object Description = Key Object Test 511</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>Image Reference</p></td>
    <td width="384" valign="top"><p>Select the image with Image Number 16</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
</table>
<table><tr><td bgcolor="#33FFFF">
<h2><a name="#test_512" id="#test_512">Image Creator Test 512: Key Image Note 512</a></h2>
<p>In this test, Image Displays will create a Key Image Note  that refers to two images from one series.</p>
<h3>References</h3>
<h3>Instructions</h3>
<ol>
  <li>Create/modify  the SQL script to identify the Image Creator under test.</li>
  <li>Start  the MESA  servers as described in <a href="#start_servers">Starting the MESA Servers</a> above.</li>
  <li>The  steps below are run from the directory <em>$MESA_TARGET/testsuite/y3_actor/actors/imgcrt</em>.</li>
  <li>Load  the data sets into the MESA Image Manager.</li>
</ol>
<pre>     perl 5xx/load_img_mgr.pl</pre>
<ol start="5">
  <li>Retrieve  the study for the patient CTFIVE^JIM.</li>
  <li>Create  a Key Image Note with the parameters described below.&nbsp; Send the DICOM composite object to the MESA  Image Manager.</li>
  </ol>
<h3>Evaluation</h3>
<ol start="1">
  <li>Evaluate  the contents of your Key Image Note as follows:</li>
</ol>
<pre>     perl 512/eval_512.pl [-v]</pre>
  <h3>Supplemental Information </h3>
  <p>If you need to send the note a second time, you should  clear the MESA Image Manager first.&nbsp; This  will allow the evaluation software to examine your latest object. </p>
  <pre>     perl scripts/reset_servers.pl</pre>
  <table border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td width="139" valign="top"><p>Template Identifier</p></td>
    <td width="384" valign="top"><p>2010:DCMR</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>Document Title</p></td>
    <td width="384" valign="top"><p>113007:DCM:For Patient</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>HAS CONC MOD</p></td>
    <td width="384" valign="top"><p>CODE 121049:DCM:Language of Content Item and Descendants    = <br />
      ISO369_2:eng:English</p></td>
    <td width="115" valign="top"><p>Optional</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>HAS OBS CONTEXT</p></td>
    <td width="384" valign="top"><p>CODE 121005:DCM:Observer Type = 121006:DCM:Person</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>HAS OBS CONTEXT</p></td>
    <td width="384" valign="top"><p>PNAME 121008:DCM:Person Observer Name = MOORE^STEVE</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>CONTAINS TEXT</p></td>
    <td width="384" valign="top"><p>113012:DCM:Key Object Description = Key Object Test 512</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>Image Reference</p></td>
    <td width="384" valign="top"><p>Select images with Image Number 67 and 68</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
</table></td>
</tr></table>
<h2><a name="#test_513" id="#test_513">Image Creator Test 513: Key Image Note 513</a></h2>
<p>In this test, Image Creators will create a Key Image Note  that refers to two images; each from a different series.</p>
<h3>References</h3>
<h3>Instructions</h3>
<ol>
  <li>Create/modify  the SQL script to identify the Image Creator under test.</li>
  <li>Start  the MESA servers  as described in <a href="#start_servers">Starting the MESA Servers</a> above.</li>
  <li>The  steps below are run from the directory <em>$MESA_TARGET/testsuite/y3_actor/actors/imgcrt</em>.</li>
  <li>Load  the data sets into the MESA Image Manager.</li>
</ol>
<pre>     perl 5xx/load_img_mgr.pl</pre>
<ol start="5">
  <li>Retrieve  the study for the patient MRTHREE^STEVE.</li>
  <li>Create  a Key Image Note with the parameters described below.&nbsp; Send the DICOM composite object to the MESA  Image Manager.</li>
</ol>
<h3>Evaluation</h3>
<ol start="1">
  <li>Evaluate  the contents of your Key Image Note as follows:</li>
</ol>
<pre>     perl 513/eval_513.pl [-v]</pre>
  <h3>Supplemental Information </h3>
  <p>If you need to send the note a second time, you should  clear the MESA Image Manager first.&nbsp; This  will allow the evaluation software to examine your latest object. </p>
  <pre>     perl  scripts/reset_servers.pl</pre>
  <table border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td width="139" valign="top"><p>Template Identifier</p></td>
    <td width="384" valign="top"><p>2010:DCMR</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>Document Title</p></td>
    <td width="384" valign="top"><p>113004:DCM:For Teaching</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>HAS CONC MOD</p></td>
    <td width="384" valign="top"><p>CODE 121049:DCM:Language of Content Item and Descendants    = <br />
      ISO369_2:eng:English</p></td>
    <td width="115" valign="top"><p>Optional</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>HAS OBS CONTEXT</p></td>
    <td width="384" valign="top"><p>CODE 121005:DCM:Observer Type = 121006:DCM:Person</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>HAS OBS CONTEXT</p></td>
    <td width="384" valign="top"><p>PNAME 121008:DCM:Person Observer Name = MOORE^STEVE</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>CONTAINS TEXT</p></td>
    <td width="384" valign="top"><p>113012:DCM:Key Object Description = Key Object Test 513</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
  <tr>
    <td width="139" valign="top"><p>Image Reference</p></td>
    <td width="384" valign="top"><p>Select Image 9 from Series 103<br />
      Select Image 19 from Series 104</p></td>
    <td width="115" valign="top"><p>Required</p></td>
  </tr>
</table>
<table><tr><td bgcolor="#33FFFF">
<h2><a name="#test_521" id="#test_521">Image Creator Test 521: Consistent Presentation  of Images</a></h2>
<p>This test is for Image Creators that support the  Consistent Display of Images integration profile.&nbsp; Instructions for this test are found in the  document <em>Display Consistency Test Plan  for Image Creator</em>.</p></td></tr></table>
<h2><a name="#test_551" id="#test_551">Image Creator Test 551: Example Image/GSPS  Objects</a></h2>
<p>The goal of this &ldquo;test&rdquo; is to provide samples for other  vendors to display.&nbsp; You should send a  &ldquo;representative sample&rdquo; of the data produced by your system.<br />
  The Scheduled Workflow integration profile only uses  images and not presentation state objects. Therefore, Image Creator actors  supporting the Scheduled Workflow integration profile should submit sample  images.<br />
  GSPS objects are discussed/supported in the Consistent  Presentation of Images integration profile. Image Creator actors create GSPS  objects (requirement) and may optionally produce images. Image Creator actors  that support the CPI integration profile should submit the GSPS objects they  produce and any images produced. If you use images that are not part of the MESA test set as the  basis for your GSPS objects, you should submit those, even if you did not  produce them. That will allow other actors to display the original images and  the appropriate GSPS objects.<br />
  Each system should send samples of the Image and/or GSPS  objects that they create to the Image Manager.&nbsp;  These are to be submitted in advance of the general date for test  results to allow other vendors the opportunity to test with them.&nbsp; Please refer to the Project Manager web site  for the due date.</p>
<h3>References</h3>
<h3>Instructions</h3>
<ol>
  <li>Clear  the MESA Image Manager of all data.</li>
  <li>Send  sample images/GSPS objects to the MESA Image Manager.</li>
  <li>Tar  or zip the files in $MESA_STORAGE/imgmgr/instances and send them to the Project  Manager (shipping instructions on Project Manager web page).</li>
</ol>
<h3>Evaluation</h3>
<h3>Supplemental Information </h3>
<table><tr><td bgcolor="#33FFFF">
<h2><a name="#test_552" id="#test_552">Image Creator Test 552: Example Key Image Note</a></h2>
<p>As with test 551, the goal of this test is to send  representative samples to the Project Manager for distribution to other  vendors.&nbsp; These samples will be based on  tests 511, 512, and 513.</p>
<h3>References</h3>
<h3>Instructions</h3>
<ol>
  <li>After  you complete tests 511, 512, and 513, locate the Key Image notes stored on the  MESA Image Manager.&nbsp; These will be in  $MESA_STORAGE/imgmgr/instances.&nbsp; The  first directory level is the Study Instance UID.&nbsp; You should recognize your Key Image Notes by  the Series Instance UID used to identify the next directory.</li>
  <li>Tar  or zip the files holding your Key Image Notes and send them to the Project  Manager (shipping instructions on Project Manager web page).</li>
  </ol>
<h3>Evaluation</h3>
<h3>Supplemental Information </h3></td>
</tr></table>
<h2><a name="#test_1412" id="#test_1412">Image Creator Test 1412: </a>PWF CT</h2>
<p>Test 1412 is a test of the steps for Post Processing  Workflow in a CT 3D reconstruction scenario. CT images will be created and a 3D  reconstruction workitem will be scheduled. As an Image Creator, you will be  asked to query for the post processing worklist and to claim the scheduled  workitem. Subsequent post processing workflow steps are not yet implemented.</p>
<h3>References</h3>
<h3>Instructions</h3>
<ol>
  <li>Run  the active manager test script:</li>
</ol>
<pre>     perl 1412/1412_imgcrt.pl</pre>
<ol start="2">
  <li>Follow  the test instructions</li>
</ol>
<h3>Evaluation</h3>
<ol start="2">
  <li>Run  the evaluation script:</li>
</ol>
<pre>     perl 1412/eval_1412.pl</pre>
  <p>The evaluation script should  yield 0 errors.
</p>
  </p>
  <h3>Supplemental Information </h3>
  <table><tr><td bgcolor="#33FFFF">
<h2><a name="#test_1701" id="#test_1701"></a>Evidence Creator Test 1701: Evidence Document  Management in Scheduled Workflow</h2>
<p>Test 1701 covers evidence document management in scheduled  workflow, part of the Evidence Document profile.&nbsp; The test itself is an implementation of the  scheme shown in Figure 14.2-1 (see IHE TF Vol I, section 14). 
<h3>References</h3>
<h3>Instructions</h3>
<p>To run this test, be sure you are in the <em>$MESA_TARGET/testsuite/y3_actor/actors/evdcrt</em> directory.&nbsp; Then, execute:
<pre>     perl  scripts/imgmgr_swf.pl 1701 &lt;log&gt;</pre>
  <h3>Evaluation</h3>
  <p>To evaluate this test:
  </p>
  <pre>     perl  1701/eval_1701.pl &lt;log&gt;</pre>
  <p>The evaluation script should yield 0 errors.
    </p>
</p>
  <h3>Supplemental Information   </h3></td></tr></table>
</body>
</html>
